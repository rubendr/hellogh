<!DOCTYPE html>
<html>

<head>
  <title>hellogh</title>
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
</head>

<body>

    <div class="w3-hide w3-padding-small">
        <input type="hidden" id="photodata" name="photodata" class="w3-input w3-border"> 
        <div class="w3-panel w3-grey w3-display-container w3-round-xxlarge w3-hide">
            <span onclick="this.parentElement.style.display = 'none'" class="w3-button w3-large w3-green w3-display-topright">Ã—</span>
            <h3>WEBCAM</h3>
            <img id="photo" class="w3-image w3-border w3-display-topright w3-circle w3-hide" width="340px" height="200px">
            <canvas id="canvas" style="display: none;"></canvas>
        </div> 
    </div>
    <div class="w3-display-topright w3-hide-small">
        <div class="w3-panel w3-display-container">
            <video id="video" class="w3-border"></video>
        </div>
    </div>
    <div class="w3-display-topright w3-hide-large w3-hide-medium"  style="margin-top:0px;">
        <div class="w3-panel w3-display-container" style="margin-top:0px;">
            <video  height="100%" width="120px" id="video2" class="w3-border"></video>
        </div>
    </div>

  <table border="1">
    <thead>
      <tr>
        <th>#Id</th>
        <th>nama</th>
        <th>telp</th>
      </tr>
    </thead>
    <tbody>
      <script>
        for (i = 0; i < 10; i++) {
          document.write("<tr><td>" + (parseInt(i) + 1) + "</td><td>nama lengkap " + i + "</td><td>082112345678" + i + "</td></tr>");
        }
      </script>
    </tbody>
  </table>
  <script>
    var width = 340;// 320; // We will scale the photo width to this
    var height = 280;// 0; // This will be computed based on the input stream
    var streaming = false;
    var video = null;
    var canvas = null;
    var photo = null;
    var startbutton = null;
    var video2 = null;
    function startup() {
      video = document.getElementById('video');
      canvas = document.getElementById('canvas');
      photo = document.getElementById('photo');
      photodata = document.getElementById('photodata');

      video2 = document.getElementById('video2');
      navigator.mediaDevices.getUserMedia({ audio: false, video: true })
        .then(function (stream) {
          video.srcObject = stream;
          video.play();
          video2.srcObject = stream;
          video2.play();
        })
        .catch(function (err) {
          console.log("An error occured! " + err);
          //alert("An error occured! " + err);
          $("#lblcamera").html("CAM:" + err);
        });
      video.addEventListener('canplay', function (ev) {
        if (!streaming) {
          height = video.videoHeight / (video.videoWidth / width);
          video.setAttribute('width', width);
          video.setAttribute('height', height);
          video.setAttribute('facingMode', 'user');
          canvas.setAttribute('width', width);
          canvas.setAttribute('height', height);
          streaming = true;
        }
      }, false);

      video2.addEventListener('canplay', function (ev) {
        if (!streaming) {
          height = video2.videoHeight / (video2.videoWidth / width);
          video2.setAttribute('width', width);
          video2.setAttribute('height', height);
          canvas.setAttribute('width', width);
          canvas.setAttribute('height', height);
          streaming = true;
        }
      }, false);
      video.addEventListener('unload', function (e) {
        alert('unloaded video');
      });
      video.addEventListener('onload', function () {
        alert('loaded');
      });
      clearphoto();
    }

    function clearphoto() {
      var context = canvas.getContext('2d');
      context.fillStyle = "#AAA";
      context.fillRect(0, 0, canvas.width, canvas.height);
      var data = canvas.toDataURL('image/png');
      photo.setAttribute('src', data);

    }

    function takepicture() {
      var context = canvas.getContext('2d');
      if (width && height) {
        canvas.width = width;
        canvas.height = height;
        context.drawImage(video, 0, 0, width, height);
        var data = canvas.toDataURL('image/png');
        photo.setAttribute('src', data);
        photodata.value = data;
      } else {
        clearphoto();
      }
    }

    startup();
  </script>
</body>

</html>